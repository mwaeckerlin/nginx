error_log stderr debug;

worker_processes auto;
pcre_jit on;
include /etc/nginx/modules/*.conf;
events {
	worker_connections 1024;
}

http {
  	client_max_body_size 0;
	include /etc/nginx/mime.types;
	default_type application/octet-stream;
	server_tokens off;
	keepalive_timeout 65;
	sendfile on;
	tcp_nodelay on;
	gzip_vary on;
	log_format recommended
	'{\n'
	'  connection: "$connection/$connection_requests", time: "$time_iso8601", version: "nginx $nginx_version",\n'
	'  agent: "$http_user_agent",\n'
	'  request: "${request}", result: "${request_time}ms ${bytes_sent}Bytes - $status $request_completion",\n'
	'  server_name: "${server_name}", url: "${scheme}://${host}${uri}",\n'
	'  document: { root: "${document_root}", uri: "${document_uri}" },\n'
	'  fast_cgi: { path_info: "${fastcgi_path_info}", script_name: "${fastcgi_script_name}" },\n'
	'  proxy: { host: "$proxy_host" },\n'
	'  upstream: { addr: "$upstream_addr", time: { connect: "${upstream_connect_time}ms", header: "${upstream_header_time}ms", response:   "${upstream_response_time}ms" } }\n'
	'}';
	log_format full
    ' -> ancient_browser = $ancient_browser\n'
    ' -> arg_ = $arg_\n'
    ' -> args = $args\n'
    ' -> binary_remote_addr = $binary_remote_addr\n'
    ' -> body_bytes_sent = $body_bytes_sent\n'
    #' -> bytes_received = $bytes_received\n'
    ' -> bytes_sent = $bytes_sent\n'
    ' -> connection = $connection\n'
    ' -> connection_requests = $connection_requests\n'
    ' -> connection_time = $connection_time\n'
    ' -> connections_active = $connections_active\n'
    ' -> connections_reading = $connections_reading\n'
    ' -> connections_waiting = $connections_waiting\n'
    ' -> connections_writing = $connections_writing\n'
    ' -> content_length = $content_length\n'
    ' -> content_type = $content_type\n'
    ' -> cookie_ = $cookie_\n'
    ' -> date_gmt = $date_gmt\n'
    ' -> date_local = $date_local\n'
    ' -> document_root = $document_root\n'
    ' -> document_uri = $document_uri\n'
    ' -> fastcgi_path_info = $fastcgi_path_info\n'
    ' -> fastcgi_script_name = $fastcgi_script_name\n'
    #' -> geoip_area_code = $geoip_area_code\n'
    #' -> geoip_city = $geoip_city\n'
    #' -> geoip_city_continent_code = $geoip_city_continent_code\n'
    #' -> geoip_city_country_code = $geoip_city_country_code\n'
    #' -> geoip_city_country_code3 = $geoip_city_country_code3\n'
    #' -> geoip_city_country_name = $geoip_city_country_name\n'
    #' -> geoip_country_code = $geoip_country_code\n'
    #' -> geoip_country_code3 = $geoip_country_code3\n'
    #' -> geoip_country_name = $geoip_country_name\n'
    #' -> geoip_dma_code = $geoip_dma_code\n'
    #' -> geoip_latitude = $geoip_latitude\n'
    #' -> geoip_longitude = $geoip_longitude\n'
    #' -> geoip_org = $geoip_org\n'
    #' -> geoip_postal_code = $geoip_postal_code\n'
    #' -> geoip_region = $geoip_region\n'
    #' -> geoip_region_name = $geoip_region_name\n'
    ' -> gzip_ratio = $gzip_ratio\n'
    ' -> host = $host\n'
    ' -> hostname = $hostname\n'
    ' -> http2 = $http2\n'
    ' -> http_ = $http_\n'
    ' -> https = $https\n'
    ' -> invalid_referer = $invalid_referer\n'
    ' -> is_args = $is_args\n'
    #' -> jwt_claim_ = $jwt_claim_\n'
    #' -> jwt_header_ = $jwt_header_\n'
    #' -> jwt_payload = $jwt_payload\n'
    ' -> limit_conn_status = $limit_conn_status\n'
    ' -> limit_rate = $limit_rate\n'
    ' -> limit_req_status = $limit_req_status\n'
    #' -> memcached_key = $memcached_key\n'
    ' -> modern_browser = $modern_browser\n'
    ' -> msec = $msec\n'
    ' -> msie = $msie\n'
    ' -> nginx_version = $nginx_version\n'
    ' -> pid = $pid\n'
    ' -> pipe = $pipe\n'
    #' -> protocol = $protocol\n'
    ' -> proxy_add_x_forwarded_for = $proxy_add_x_forwarded_for\n'
    ' -> proxy_host = $proxy_host\n'
    ' -> proxy_port = $proxy_port\n'
    ' -> proxy_protocol_addr = $proxy_protocol_addr\n'
    ' -> proxy_protocol_port = $proxy_protocol_port\n'
    ' -> proxy_protocol_server_addr = $proxy_protocol_server_addr\n'
    ' -> proxy_protocol_server_port = $proxy_protocol_server_port\n'
    #' -> proxy_protocol_tlv_ = $proxy_protocol_tlv_\n'
    #' -> proxy_protocol_tlv_aws_vpce_id = $proxy_protocol_tlv_aws_vpce_id\n'
    #' -> proxy_protocol_tlv_azure_pel_id = $proxy_protocol_tlv_azure_pel_id\n'
    #' -> proxy_protocol_tlv_gcp_conn_id = $proxy_protocol_tlv_gcp_conn_id\n'
    ' -> query_string = $query_string\n'
    ' -> realip_remote_addr = $realip_remote_addr\n'
    ' -> realip_remote_port = $realip_remote_port\n'
    ' -> realpath_root = $realpath_root\n'
    ' -> remote_addr = $remote_addr\n'
    ' -> remote_port = $remote_port\n'
    ' -> remote_user = $remote_user\n'
    ' -> request = $request\n'
    ' -> request_body = $request_body\n'
    ' -> request_body_file = $request_body_file\n'
    ' -> request_completion = $request_completion\n'
    ' -> request_filename = $request_filename\n'
    ' -> request_id = $request_id\n'
    ' -> request_length = $request_length\n'
    ' -> request_method = $request_method\n'
    ' -> request_time = $request_time\n'
    ' -> request_uri = $request_uri\n'
    ' -> scheme = $scheme\n'
    ' -> secure_link = $secure_link\n'
    ' -> secure_link_expires = $secure_link_expires\n'
    ' -> sent_http_ = $sent_http_\n'
    ' -> sent_trailer_ = $sent_trailer_\n'
    ' -> server_addr = $server_addr\n'
    ' -> server_name = $server_name\n'
    ' -> server_port = $server_port\n'
    ' -> server_protocol = $server_protocol\n'
    #' -> session_log_binary_id = $session_log_binary_id\n'
    #' -> session_log_id = $session_log_id\n'
    #' -> session_time = $session_time\n'
    ' -> slice_range = $slice_range\n'
    #' -> spdy = $spdy\n'
    #' -> spdy_request_priority = $spdy_request_priority\n'
    ' -> ssl_alpn_protocol = $ssl_alpn_protocol\n'
    ' -> ssl_cipher = $ssl_cipher\n'
    ' -> ssl_ciphers = $ssl_ciphers\n'
    ' -> ssl_client_cert = $ssl_client_cert\n'
    ' -> ssl_client_escaped_cert = $ssl_client_escaped_cert\n'
    ' -> ssl_client_fingerprint = $ssl_client_fingerprint\n'
    ' -> ssl_client_i_dn = $ssl_client_i_dn\n'
    ' -> ssl_client_i_dn_legacy = $ssl_client_i_dn_legacy\n'
    ' -> ssl_client_raw_cert = $ssl_client_raw_cert\n'
    ' -> ssl_client_s_dn = $ssl_client_s_dn\n'
    ' -> ssl_client_s_dn_legacy = $ssl_client_s_dn_legacy\n'
    ' -> ssl_client_serial = $ssl_client_serial\n'
    ' -> ssl_client_v_end = $ssl_client_v_end\n'
    ' -> ssl_client_v_remain = $ssl_client_v_remain\n'
    ' -> ssl_client_v_start = $ssl_client_v_start\n'
    ' -> ssl_client_verify = $ssl_client_verify\n'
    ' -> ssl_curve = $ssl_curve\n'
    ' -> ssl_curves = $ssl_curves\n'
    ' -> ssl_early_data = $ssl_early_data\n'
    #' -> ssl_preread_alpn_protocols = $ssl_preread_alpn_protocols\n'
    #' -> ssl_preread_protocol = $ssl_preread_protocol\n'
    #' -> ssl_preread_server_name = $ssl_preread_server_name\n'
    ' -> ssl_protocol = $ssl_protocol\n'
    ' -> ssl_server_name = $ssl_server_name\n'
    ' -> ssl_session_id = $ssl_session_id\n'
    ' -> ssl_session_reused = $ssl_session_reused\n'
    ' -> status = $status\n'
    ' -> tcpinfo_rtt = $tcpinfo_rtt\n'
    ' -> tcpinfo_rttvar = $tcpinfo_rttvar\n'
    ' -> tcpinfo_snd_cwnd = $tcpinfo_snd_cwnd\n'
    ' -> tcpinfo_rcv_space = $tcpinfo_rcv_space\n'
    ' -> time_iso8601 = $time_iso8601\n'
    ' -> time_local = $time_local\n'
    ' -> uid_got = $uid_got\n'
    ' -> uid_reset = $uid_reset\n'
    ' -> uid_set = $uid_set\n'
    ' -> upstream_addr = $upstream_addr\n'
    ' -> upstream_bytes_received = $upstream_bytes_received\n'
    ' -> upstream_bytes_sent = $upstream_bytes_sent\n'
    ' -> upstream_cache_status = $upstream_cache_status\n'
    ' -> upstream_connect_time = $upstream_connect_time\n'
    ' -> upstream_cookie_ = $upstream_cookie_\n'
    #' -> upstream_first_byte_time = $upstream_first_byte_time\n'
    ' -> upstream_header_time = $upstream_header_time\n'
    ' -> upstream_http_ = $upstream_http_\n'
    #' -> upstream_queue_time = $upstream_queue_time\n'
    ' -> upstream_response_length = $upstream_response_length\n'
    ' -> upstream_response_time = $upstream_response_time\n'
    #' -> upstream_session_time = $upstream_session_time\n'
    ' -> upstream_status = $upstream_status\n'
    ' -> upstream_trailer_ = $upstream_trailer_\n'
    ' -> uri = $uri\n'
	'}';

	log_format upstream_time
	'{\n'
	'  request:      "$request",\n'
	'  time:         "$request_time",\n' 
	'  file:         "$document_root$fastcgi_script_name",\n'
	'  referrer:     "$http_referer",\n'
	'  forwarded:    "$http_x_forwarded_for",\n'
	'  agent:        "$http_user_agent",\n'
	'  bytes:        $body_bytes_sent,\n'
	'  status:       $status.\n'
	'  remote: {\n'
	'    addr:       "$remote_addr",\n'
	'    user:       "$remote_user",\n'
	'    time:       "$time_local",\n'
	'  },\n'
	'  upstream-time: {\n'
	'    connect:    "$upstream_connect_time",\n'
	'    header:     "$upstream_header_time",\n'
	'    response:   "$upstream_response_time",\n'
	'  }\n'
	'}';

	log_format main
	'{\n'
	'  request:      "$request",\n'
	'  time:         "$request_time",\n'
	'  file:         "$document_root$fastcgi_script_name",\n'
	'  referrer:     "$http_referer",\n'
	'  forwarded:    "$http_x_forwarded_for",\n'
	'  agent:        "$http_user_agent",\n'
	'  bytes:        $body_bytes_sent,\n'
	'  status:       $status.\n'
	'}';

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/server.d/*.conf;
}
daemon off;

